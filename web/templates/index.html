{% extends "base.html" %}

{% block content %}

<div>
  {% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
  {% for category, message in messages %}
  {% if category == 'message' %}
  <div class="alert alert-warning" role="alert">
    {% else %}
    <div class="alert alert-{{ category }}" role="alert">
      {% endif %}
      {{ message|safe }}
    </div>
    {% endfor %}
    {% endif %}
    {% endwith %}
  </div>

  <div class="row align-items-md-stretch">
    <div class="col-md-6" style="margin-top:5px; margin-bottom:5px;">
      <div class="h-20 p-2 bg-light border rounded-3">
        <h6 class="display-6 text-center">Plotting:
          <span {% if plotting.display_status=='Active' %} class="text-success" {% endif %}>
            {{ plotting.display_status }}
          </span>
        </h6>
      </div>
    </div>
    <div class="col-md-6" style="margin-top:5px; margin-bottom:5px;">
      <div class="h-20 p-2 bg-light border rounded-3">
        <h6 class="display-6 text-center">Farming:
          <span {% if farming.display_status=='Active' %} class="text-success" {% endif %}>
            {{ farming.display_status }}
          </span>
        </h6>
      </div>
    </div>
  </div>

  <div class="row align-items-md-stretch">
    <div class="col-md-3" style="margin-top:5px; margin-bottom:5px;">
      <div class="h-100 p-2 text-white bg-dark rounded-3">
        <h4 class="display-4 text-center text-success">{{ farming.plot_count }}</h4>
        <h6 class="display-6 text-center">Total Plots</h6>
      </div>
    </div>
    <div class="col-md-3" style="margin-top:5px; margin-bottom:5px;">
      <div class="h-100 p-2 text-white bg-dark rounded-3">
        <h4 class="display-4 text-center text-success">{{ daily_diff.plot_count }}</h4>
        <h6 class="display-6 text-center">In Last Day</h6>
      </div>
    </div>
    <div class="col-md-3" style="margin-top:5px; margin-bottom:5px;">
      <div class="h-100 p-2 text-white bg-dark rounded-3">
        <h4 class="display-4 text-center text-success">{{ farming.plots_display_size }}</h4>
        <h6 class="display-6 text-center">Total Plots Size</h6>
      </div>
    </div>
    <div class="col-md-3" style="margin-top:5px; margin-bottom:5px;">
      <div class="h-100 p-2 text-white bg-dark rounded-3">
        <h4 class="display-4 text-center text-success">{{ daily_diff.plots_size }}</h4>
        <h6 class="display-6 text-center">In Last Day</h6>
      </div>
    </div>
  </div>

  <div class="row align-items-md-stretch">
    <div class="col-md-3" style="margin-top:5px; margin-bottom:5px;">
      <div class="h-100 p-2 text-white bg-dark rounded-3">
        <h4 class="display-4 text-center text-success">{{ farming.total_chia }}</h4>
        <h6 class="display-6 text-center"><a title="Estimated Time to Win: {{ farming.expected_time_to_win }}">Chia Farmed</a></h6>
      </div>
    </div>
    <div class="col-md-3" style="margin-top:5px; margin-bottom:5px;">
      <div class="h-100 p-2 text-white bg-dark rounded-3">
        <h4 class="display-4 text-center text-success">{{ daily_diff.total_chia }}</h4>
        <h6 class="display-6 text-center">In Last Day</h6>
      </div>
    </div>
    
    {% if global_config.flax_enabled %}
    <div class="col-md-3" style="margin-top:5px; margin-bottom:5px;">
      <div class="h-100 p-2 text-white bg-dark rounded-3">
        <h4 class="display-4 text-center text-success">{{ farming.total_flax }}</h4>
        <h6 class="display-6 text-center"><a title="Estimated Time to Win: {{ farming.flax_expected_time_to_win }}">Flax Farmed</a></h6>
      </div>
    </div>
    <div class="col-md-3" style="margin-top:5px; margin-bottom:5px;">
      <div class="h-100 p-2 text-white bg-dark rounded-3">
        <h4 class="display-4 text-center text-success">{{ daily_diff.total_flax }}</h4>
        <h6 class="display-6 text-center">In Last Day</h6>
      </div>
    </div>
    {% endif %}
  </div>

  <div class="row align-items-md-stretch">
    <div class="col-md-3" style="margin-top:5px; margin-bottom:5px;">
      <div class="h-100 p-2 text-white bg-dark rounded-3">
        <div style="white-space:pre-wrap; margin-bottom:0px; padding-bottom: 0px;">{{ daily_diff.daily_summary_chia }}</div>
      </div>
    </div>
    <div class="col-md-3" style="margin-top:5px; margin-bottom:5px;">
      <div class="row align-items-md-stretch">
        <div class="col" style="margin-bottom:5px;">
          <div class="h-100 p-2 text-white bg-dark rounded-3" style="padding-top:12px !important; padding-bottom:12px !important;">
            <h4 class="display-4 text-center text-success">{{ farming.netspace_display_size }}</h4>
            <h6 class="display-6 text-center">Chia Netspace</h6>
          </div>
        </div>
      </div>
      <div class="row align-items-md-stretch">
        <div class="col" style="margin-top:5px; margin-bottom:5px;">
          <div class="h-100 p-2 text-white bg-dark rounded-3" style="padding-top:12px !important; padding-bottom:12px !important;">
            <h4 class="display-4 text-center text-success">{{ daily_diff.netspace_chia }}</h4>
            <h6 class="display-6 text-center">In Last Day</h6>
          </div>
        </div>
      </div>
    </div>
    {% if global_config.flax_enabled %}
    <div class="col-md-3" style="margin-top:5px; margin-bottom:5px;">
      <div class="h-100 p-2 text-white bg-dark rounded-3">
        <div style="white-space:pre-wrap; margin-bottom:0px; padding-bottom: 0px;">{{ daily_diff.daily_summary_flax }}</div>
      </div>
    </div>
    <div class="col-md-3" style="margin-top:5px; margin-bottom:5px;">
      <div class="row align-items-md-stretch">
        <div class="col" style="margin-bottom:5px;">
          <div class="h-100 p-2 text-white bg-dark rounded-3" style="padding-top:12px !important; padding-bottom:12px !important;">
            <h4 class="display-4 text-center text-success">{{ farming.flax_netspace_display_size }}</h4>
            <h6 class="display-6 text-center">Flax Netspace</h6>
          </div>
        </div>
      </div>
      <div class="row align-items-md-stretch">
        <div class="col" style="margin-top:5px; margin-bottom:5px;">
          <div class="h-100 p-2 text-white bg-dark rounded-3" style="padding-top:12px !important; padding-bottom:12px !important;">
            <h4 class="display-4 text-center text-success">{{ daily_diff.netspace_flax }}</h4>
            <h6 class="display-6 text-center">In Last Day</h6>
          </div>
        </div>
      </div>
    </div>
    {% endif %}
  </div>

  {% if global_config.farming_enabled %}
  <div class="col-md-12" style="margin-top:5px; margin-bottom:5px;">
    <div class="h-100 p-2 text-white bg-dark rounded-3" id="challenges-table-div">
      {% include 'views/challenges.html' %}
    </div>
  </div>
  {% endif %}

  {% endblock %}

  {% block scripts %}
  {% if global_config.farming_enabled %}
  <script>
    setInterval(function () {
      $.ajax({
        type: "GET",
        url: "{{ url_for('views_challenges') }}",
      })
        .done(function (data) {
          //console.log(data);
          $("#challenges-table-div").html(data)
        }).fail(function (jqXHR, textStatus, errorThrown) {
          console.log(jqXHR, textStatus, errorThrown);
        });
    }, 1000 * 5);
  </script>
  {% endif %}
  {% endblock %}